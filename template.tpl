___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "CookieLegit - Cookie Consent",
  "categories": ["TAG_MANAGEMENT", "PERSONALIZATION"]
  "brand": {
    "id": "github.com_CookieLegit",
    "displayName": "CookieLegit",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAIAAABMXPacAAAEuWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjEyOCIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjEyOCIKICAgZXhpZjpDb2xvclNwYWNlPSIxIgogICB0aWZmOkltYWdlV2lkdGg9IjEyOCIKICAgdGlmZjpJbWFnZUxlbmd0aD0iMTI4IgogICB0aWZmOlJlc29sdXRpb25Vbml0PSIyIgogICB0aWZmOlhSZXNvbHV0aW9uPSI0MDAvMSIKICAgdGlmZjpZUmVzb2x1dGlvbj0iNDAwLzEiCiAgIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiCiAgIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIKICAgeG1wOk1vZGlmeURhdGU9IjIw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\u003d"
  },
  "description": "This is a cookie consent template for CookieLegit, a CMP designed for WordPress",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "PARAM_TABLE",
    "name": "defautlConsentSettings",
    "displayName": "Default cookie consent",
    "paramTableColumns": [
      {
        "param": {
          "type": "SELECT",
          "name": "marketingCookies",
          "displayName": "Analytical cookies",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": false,
              "displayValue": "Disabled"
            },
            {
              "value": true,
              "displayValue": "Enabled"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "advertisingCookies",
          "displayName": "Advertising cookies",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": false,
              "displayValue": "Disabled"
            },
            {
              "value": true,
              "displayValue": "Enabled"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "essentialCookies",
          "displayName": "Essential cookies",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": true,
              "displayValue": "Enabled"
            }
          ],
          "simpleValueType": true,
          "help": ""
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "TEXT",
          "name": "regions",
          "displayName": "Regions",
          "simpleValueType": true,
          "help": "The regions you want these settings to be applied to. Use comma seperated value. Use \u0027all\u0027 for all regions",
          "defaultValue": "all"
        },
        "isUnique": false
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// The first two lines are optional, use if you want to enable logging
const log = require('logToConsole');
log('data =', data);

const setDefaultConsentState = require('setDefaultConsentState');
const updateConsentState = require('updateConsentState');
const getCookieValues = require('getCookieValues');
const callInWindow = require('callInWindow');
const gtagSet = require('gtagSet');
const createQueue = require('createQueue');
const JSON = require('JSON');
const Object = require('Object');
const COOKIE_NAME = 'cl_cus';

const dataLayerPush = createQueue('dataLayer');

const defaultConsentSettings = data.defaultConsentSettings.length === 0 ? [{
  marketingCookies: false,
  advertisingCookies: false,
  essentialCookies: false,
  regions: 'all',
}] : data.defaultConsentSettings;

/*
 * Create the consent state from consent settings
 */
const createConsentState = (consentSettings) => {
 return {
    ad_storage: consentSettings.advertisingCookies ? 'granted' : 'denied',
    ad_user_data: consentSettings.advertisingCookies ? 'granted' : 'denied',
    ad_personalization: consentSettings.advertisingCookies ? 'granted' : 'denied',
    analytics_storage: consentSettings.marketingCookies ? 'granted' : 'denied',
    functionality_storage: consentSettings.essentialCookies ? 'granted' : 'denied',
    personalization_storage: consentSettings.marketingCookies ? 'granted' : 'denied',
    security_storage: consentSettings.essentialCookies ? 'granted' : 'denied',
  };
};

/*
 *   Splits the input string using comma as a delimiter, returning an array of
 *   strings
 */
const splitInput = (input) => {
  return input.split(',')
      .map(entry => entry.trim())
      .filter(entry => entry.length !== 0);
};

/*
 *   Processes a row of input from the default settings table, returning an object
 *   which can be passed as an argument to setDefaultConsentState
 */
const parseCommandData = (settings) => {
  
  const consentState = createConsentState({
    marketingCookies: settings.marketingCookies, 
    advertisingCookies: settings.advertisingCookies, 
    essentialCookies: settings.essentialCookies
  });
  
  const commandData = consentState;
  
  const splitRegions = splitInput(settings.regions);

  if (splitRegions.length > 0) {
    commandData.region = splitRegions;
  }
  
  return commandData;
};

/*
 *   Called when consent changes. Assumes that consent object contains keys which
 *   directly correspond to Google consent types.
 */
const onUserConsent = (consent) => {
  const consentState = createConsentState(consent);

  updateConsentState(consentState);
  
  dataLayerPush({'event': 'CookieLegitConsentUpdated'});
};

/*
 *   Executes the default command, sets the developer ID, and sets up the consent
 *   update callback
 */
const main = (data) => {

  // Set default consent state(s)
  defaultConsentSettings.forEach(settings => {
    const defaultData = parseCommandData(settings);
  
    defaultData.wait_for_update = 2000;
    
    setDefaultConsentState(defaultData);
  });

  // Check for settings stored in consent user settings cookie
  const settings = getCookieValues(COOKIE_NAME)[0];
  
  if (typeof settings !== 'undefined') {
    onUserConsent(JSON.parse(settings));
  }
  
  callInWindow('cookieLegitGtmCaller', onUserConsent);
};

main(data);

data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "cookieLegitGtmCaller"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "write_data_layer",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "cl_cus"
              },
              {
                "type": 1,
                "string": "cl_consent"
              },
              {
                "type": 1,
                "string": "cl_tracking"
              },
              {
                "type": 1,
                "string": "cl_marketing"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: it runs with empty consent settings
  code: |-
    const mockData = {
      defaultConsentSettings: []
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
setup: ''


___NOTES___

Created on 3/3/2025, 6:59:00 PM


